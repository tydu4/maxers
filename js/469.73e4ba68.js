"use strict";(self["webpackChunkpodarkit"]=self["webpackChunkpodarkit"]||[]).push([[469],{4393:function(t,e,a){a.r(e),a.d(e,{default:function(){return rt}});a(8111),a(2489),a(116),a(1701),a(8237),a(3579);var l=a(6768),s=a(4232),i=a(144),n=a(8512),r=a(4461),u=a(5294),o=a(7942),c=a(7250),d=a(8459);const v={class:"box-page"},m={key:0,class:"loading"},k={class:"hero-section"},p={class:"gallery"},g={class:"main-image"},L=["src"],b={class:"thumbnails"},h=["onClick"],y=["src"],f={class:"box-info"},C={class:"h2 montserrat-bold gradient-second-text"},x={class:"p montserrat-light gray-text"},E={class:"price-block"},_={key:0,class:"original-price p-small montserrat-regular gray-text"},q={style:{"text-decoration":"line-through"}},I={class:"current-price h3 montserrat-bold white-text"},X={class:"emotions-block"},w={class:"p-small montserrat-medium second-text"},K={class:"action-buttons"},F=["disabled"],W=["title"],M={class:"tags-block"},B={class:"items-section"},R={class:"items-list"},Q={class:"item-image"},S=["src","alt"],j={class:"item-details"},A={class:"p montserrat-semibold white-text"},P={class:"p-small montserrat-regular gray-text"},T={class:"item-unit-price p-small montserrat-regular gray-text"},U={class:"item-controls"},V={class:"quantity-control"},Z=["onClick","disabled"],z={class:"p montserrat-semibold white-text"},D=["onClick"],G={class:"item-price p montserrat-bold white-text"},H=["onClick"],J={key:0,class:"empty-state"},N={key:1,class:"reset-composition"},O={class:"description-section"},Y={class:"features"},$={class:"feature-icon montserrat-bold gradient-second-text"},tt={class:"feature-content"},et={class:"p montserrat-semibold white-text"},at={class:"p-small montserrat-regular gray-text"},lt={class:"cards-wrapper"};var st={__name:"BoxPage",props:{boxId:String,slug:String},setup(t){const e=t,a=(0,n.lq)(),st=(0,l.EW)(()=>e.slug||a.params.slug),it=(0,i.KR)(""),nt=(0,i.KR)(!1),rt=(0,i.KR)(!1),ut=(0,l.EW)(()=>r.aj.find(t=>t.slug===st.value||t.id===e.boxId)),ot=(0,l.EW)(()=>{if(!ut.value)return[];const t=r.aj.filter(t=>t.id!==ut.value.id);let e=t.filter(t=>{const e=t.emotion===ut.value.emotion,a=t.tags.some(t=>ut.value.tags.includes(t));return e||a});if(e.length<4){const a=t.filter(t=>!e.includes(t));for(let t=a.length-1;t>0;t--){const e=Math.floor(Math.random()*(t+1));[a[t],a[e]]=[a[e],a[t]]}e=e.concat(a.slice(0,4-e.length))}if(0===e.length){const e=[...t].sort(()=>.5-Math.random());return e.slice(0,4)}return e.slice(0,4)}),ct=(0,i.KR)([]),dt=(0,l.EW)(()=>ut.value?(0,r.PL)(ut.value.id):0),vt=(0,l.EW)(()=>ct.value.reduce((t,e)=>t+e.price*e.quantity,0)),mt=(0,l.EW)(()=>{if(!ut.value)return!1;const t=ut.value.defaultComposition;return t.length!==ct.value.length||ct.value.some(e=>{const a=t.find(t=>t.productId===e.productId);return!a||a.quantity!==e.quantity})});function kt(t){t.quantity++}function pt(t){t.quantity>1&&t.quantity--}function gt(t){ct.value=ct.value.filter(e=>e.productId!==t)}function Lt(){ut.value&&bt()}function bt(){ut.value&&(ct.value=ut.value.defaultComposition.map(t=>{const e=u.Z[t.productId];return{productId:t.productId,name:e.name,description:e.description,price:e.price,image:e.image,quantity:t.quantity}}))}function ht(){if(!ut.value||0===ct.value.length)return;rt.value=!0;const t=mt.value?ct.value.map(t=>({productId:t.productId,quantity:t.quantity})):null;if(t){const e=c.M.addBox(ut.value.id);c.M.updateBoxComposition(e.id,t)}else c.M.addBox(ut.value.id);console.log("Добавлено в корзину:",ut.value.name,t?"(изменённый состав)":""),setTimeout(()=>{rt.value=!1},2e3)}function yt(){if(!ut.value)return;const t=d.r.toggle(ut.value.id);nt.value=t}function ft(t){return t.toLocaleString("ru-RU")}return(0,l.sV)(()=>{ut.value&&(it.value=ut.value.images[0],nt.value=d.r.isFavorite(ut.value.id),bt())}),(t,e)=>((0,l.uX)(),(0,l.CE)("div",v,[ut.value?((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.Lk)("div",k,[(0,l.Lk)("div",p,[(0,l.Lk)("div",g,[(0,l.Lk)("img",{src:it.value,alt:"Box image"},null,8,L)]),(0,l.Lk)("div",b,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(ut.value.images,(t,e)=>((0,l.uX)(),(0,l.CE)("div",{key:e,class:(0,s.C4)(["thumbnail",{active:it.value===t}]),onClick:e=>it.value=t},[(0,l.Lk)("img",{src:t,alt:"Thumbnail"},null,8,y)],10,h))),128))])]),(0,l.Lk)("div",f,[(0,l.Lk)("h1",C,(0,s.v_)(ut.value.name),1),(0,l.Lk)("p",x,(0,s.v_)(ut.value.tagline),1),(0,l.Lk)("div",E,[dt.value!==vt.value?((0,l.uX)(),(0,l.CE)("div",_,[(0,l.Lk)("span",q,(0,s.v_)(ft(dt.value))+" ₽",1)])):(0,l.Q3)("",!0),(0,l.Lk)("div",I,(0,s.v_)(ft(vt.value))+" ₽ ",1)]),(0,l.Lk)("div",X,[(0,l.Lk)("p",w,"✨ "+(0,s.v_)(ut.value.emotion),1)]),(0,l.Lk)("div",K,[(0,l.Lk)("button",{class:"button-second montserrat-semibold",onClick:ht,disabled:0===ct.value.length||rt.value},(0,s.v_)(rt.value?"✓ Добавлено":"Добавить в корзину"),9,F),(0,l.Lk)("button",{class:"button-gray montserrat-medium",onClick:yt,title:nt.value?"Убрать из избранного":"В избранное"},(0,s.v_)(nt.value?"♥":"♡"),9,W)]),(0,l.Lk)("div",M,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(ut.value.tags,t=>((0,l.uX)(),(0,l.CE)("span",{key:t,class:"tag montserrat-regular"},(0,s.v_)(t),1))),128))])])]),(0,l.Lk)("div",B,[e[2]||(e[2]=(0,l.Lk)("h2",{class:"h4 montserrat-semibold white-text"},"Состав бокса",-1)),e[3]||(e[3]=(0,l.Lk)("p",{class:"p-small montserrat-regular gray-text"}," Вы можете настроить комплект под себя: изменить количество или удалить товары ",-1)),(0,l.Lk)("div",R,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(ct.value,t=>((0,l.uX)(),(0,l.CE)("div",{key:t.id,class:"box-item"},[(0,l.Lk)("div",Q,[(0,l.Lk)("img",{src:t.image,alt:t.name},null,8,S)]),(0,l.Lk)("div",j,[(0,l.Lk)("h3",A,(0,s.v_)(t.name),1),(0,l.Lk)("p",P,(0,s.v_)(t.description),1),(0,l.Lk)("div",T,(0,s.v_)(ft(t.price))+" ₽ за шт. ",1)]),(0,l.Lk)("div",U,[(0,l.Lk)("div",V,[(0,l.Lk)("button",{class:"qty-btn montserrat-medium",onClick:e=>pt(t),disabled:t.quantity<=1,title:"Уменьшить количество"}," − ",8,Z),(0,l.Lk)("span",z,(0,s.v_)(t.quantity),1),(0,l.Lk)("button",{class:"qty-btn montserrat-medium",onClick:e=>kt(t),title:"Увеличить количество"}," + ",8,D)]),(0,l.Lk)("div",G,(0,s.v_)(ft(t.price*t.quantity))+" ₽ ",1),(0,l.Lk)("button",{class:"delete-btn montserrat-regular",onClick:e=>gt(t.productId),title:"Удалить товар"}," ✕ ",8,H)])]))),128))]),0===ct.value.length?((0,l.uX)(),(0,l.CE)("div",J,[e[1]||(e[1]=(0,l.Lk)("p",{class:"p montserrat-regular gray-text"}," Все товары удалены из бокса. Добавьте товары, чтобы продолжить. ",-1)),(0,l.Lk)("button",{onClick:Lt,class:"button-second montserrat-semibold"}," Вернуть оригинальный состав ")])):(0,l.Q3)("",!0),mt.value?((0,l.uX)(),(0,l.CE)("div",N,[(0,l.Lk)("button",{onClick:Lt,class:"reset-btn montserrat-medium"}," ↺ Вернуть оригинальный состав ")])):(0,l.Q3)("",!0)]),(0,l.Lk)("div",O,[e[4]||(e[4]=(0,l.Lk)("h2",{class:"h4 montserrat-semibold white-text"},"Почему этот бокс особенный",-1)),(0,l.Lk)("div",Y,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(ut.value.features,(t,e)=>((0,l.uX)(),(0,l.CE)("div",{key:e,class:"feature-item"},[(0,l.Lk)("div",$,(0,s.v_)(t.icon),1),(0,l.Lk)("div",tt,[(0,l.Lk)("h3",et,(0,s.v_)(t.title),1),(0,l.Lk)("p",at,(0,s.v_)(t.description),1)])]))),128))])])],64)):((0,l.uX)(),(0,l.CE)("div",m,[...e[0]||(e[0]=[(0,l.Lk)("p",{class:"p montserrat-regular gray-text"},"Загрузка...",-1)])])),e[5]||(e[5]=(0,l.Lk)("h2",{class:"h4 montserrat-semibold white-text"},"Вам может понравиться",-1)),(0,l.Lk)("div",lt,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(ot.value,t=>((0,l.uX)(),(0,l.Wv)(o.A,{key:t.id,box:t},null,8,["box"]))),128))])]))}},it=a(1241);const nt=(0,it.A)(st,[["__scopeId","data-v-30e09a95"]]);var rt=nt}}]);
//# sourceMappingURL=469.73e4ba68.js.map