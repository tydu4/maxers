{"version":3,"file":"js/469.73e4ba68.js","mappings":"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","sources":["webpack://podarkit/./src/pages/BoxPage.vue","webpack://podarkit/./src/pages/BoxPage.vue?5de9"],"sourcesContent":["<template>\r\n  <div class=\"box-page\">\r\n    <div v-if=\"!box\" class=\"loading\">\r\n      <p class=\"p montserrat-regular gray-text\">Загрузка...</p>\r\n    </div>\r\n\r\n    <template v-else>\r\n      <!-- Hero Section -->\r\n      <div class=\"hero-section\">\r\n        <div class=\"gallery\">\r\n          <div class=\"main-image\">\r\n            <img :src=\"currentImage\" alt=\"Box image\" />\r\n          </div>\r\n          <div class=\"thumbnails\">\r\n            <div \r\n              v-for=\"(img, index) in box.images\" \r\n              :key=\"index\"\r\n              class=\"thumbnail\"\r\n              :class=\"{ active: currentImage === img }\"\r\n              @click=\"currentImage = img\"\r\n            >\r\n              <img :src=\"img\" alt=\"Thumbnail\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"box-info\">\r\n          <h1 class=\"h2 montserrat-bold gradient-second-text\">{{ box.name }}</h1>\r\n          <p class=\"p montserrat-light gray-text\">{{ box.tagline }}</p>\r\n          \r\n          <div class=\"price-block\">\r\n            <div \r\n              class=\"original-price p-small montserrat-regular gray-text\" \r\n              v-if=\"originalPrice !== totalPrice\"\r\n            >\r\n              <span style=\"text-decoration: line-through;\">{{ formatPrice(originalPrice) }} ₽</span>\r\n            </div>\r\n            <div class=\"current-price h3 montserrat-bold white-text\">\r\n              {{ formatPrice(totalPrice) }} ₽\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"emotions-block\">\r\n            <p class=\"p-small montserrat-medium second-text\">✨ {{ box.emotion }}</p>\r\n          </div>\r\n\r\n          <div class=\"action-buttons\">\r\n            <button \r\n              class=\"button-second montserrat-semibold\"\r\n              @click=\"addToCart\"\r\n              :disabled=\"boxItems.length === 0 || isAddingToCart\"\r\n            >\r\n              {{ isAddingToCart ? '✓ Добавлено' : 'Добавить в корзину' }}\r\n            </button>\r\n            <button \r\n              class=\"button-gray montserrat-medium\"\r\n              @click=\"toggleFavorite\"\r\n              :title=\"isFavorite ? 'Убрать из избранного' : 'В избранное'\"\r\n            >\r\n              {{ isFavorite ? '♥' : '♡' }}\r\n            </button>\r\n          </div>\r\n\r\n          <!-- Теги -->\r\n          <div class=\"tags-block\">\r\n            <span \r\n              v-for=\"tag in box.tags\" \r\n              :key=\"tag\"\r\n              class=\"tag montserrat-regular\"\r\n            >\r\n              {{ tag }}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Items Section -->\r\n      <div class=\"items-section\">\r\n        <h2 class=\"h4 montserrat-semibold white-text\">Состав бокса</h2>\r\n        <p class=\"p-small montserrat-regular gray-text\">\r\n          Вы можете настроить комплект под себя: изменить количество или удалить товары\r\n        </p>\r\n\r\n        <div class=\"items-list\">\r\n          <div v-for=\"item in boxItems\" :key=\"item.id\" class=\"box-item\">\r\n            <div class=\"item-image\">\r\n              <img :src=\"item.image\" :alt=\"item.name\" />\r\n            </div>\r\n            \r\n            <div class=\"item-details\">\r\n              <h3 class=\"p montserrat-semibold white-text\">{{ item.name }}</h3>\r\n              <p class=\"p-small montserrat-regular gray-text\">{{ item.description }}</p>\r\n              <div class=\"item-unit-price p-small montserrat-regular gray-text\">\r\n                {{ formatPrice(item.price) }} ₽ за шт.\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"item-controls\">\r\n              <div class=\"quantity-control\">\r\n                <button \r\n                  class=\"qty-btn montserrat-medium\"\r\n                  @click=\"decreaseQuantity(item)\"\r\n                  :disabled=\"item.quantity <= 1\"\r\n                  title=\"Уменьшить количество\"\r\n                >\r\n                  −\r\n                </button>\r\n                <span class=\"p montserrat-semibold white-text\">{{ item.quantity }}</span>\r\n                <button \r\n                  class=\"qty-btn montserrat-medium\"\r\n                  @click=\"increaseQuantity(item)\"\r\n                  title=\"Увеличить количество\"\r\n                >\r\n                  +\r\n                </button>\r\n              </div>\r\n              \r\n              <div class=\"item-price p montserrat-bold white-text\">\r\n                {{ formatPrice(item.price * item.quantity) }} ₽\r\n              </div>\r\n\r\n              <button \r\n                class=\"delete-btn montserrat-regular\"\r\n                @click=\"removeItem(item.productId)\"\r\n                title=\"Удалить товар\"\r\n              >\r\n                ✕\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div v-if=\"boxItems.length === 0\" class=\"empty-state\">\r\n          <p class=\"p montserrat-regular gray-text\">\r\n            Все товары удалены из бокса. Добавьте товары, чтобы продолжить.\r\n          </p>\r\n          <button \r\n            @click=\"resetComposition\"\r\n            class=\"button-second montserrat-semibold\"\r\n          >\r\n            Вернуть оригинальный состав\r\n          </button>\r\n        </div>\r\n\r\n        <!-- Кнопка сброса, если состав изменён -->\r\n        <div v-if=\"isCompositionModified\" class=\"reset-composition\">\r\n          <button \r\n            @click=\"resetComposition\"\r\n            class=\"reset-btn montserrat-medium\"\r\n          >\r\n            ↺ Вернуть оригинальный состав\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Description Section -->\r\n      <div class=\"description-section\">\r\n        <h2 class=\"h4 montserrat-semibold white-text\">Почему этот бокс особенный</h2>\r\n        <div class=\"features\">\r\n          <div v-for=\"(feature, index) in box.features\" :key=\"index\" class=\"feature-item\">\r\n            <div class=\"feature-icon montserrat-bold gradient-second-text\">\r\n              {{ feature.icon }}\r\n            </div>\r\n            <div class=\"feature-content\">\r\n              <h3 class=\"p montserrat-semibold white-text\">{{ feature.title }}</h3>\r\n              <p class=\"p-small montserrat-regular gray-text\">{{ feature.description }}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </template>\r\n    <h2 class=\"h4 montserrat-semibold white-text\">Вам может понравиться</h2>\r\n    <div class=\"cards-wrapper\">\r\n      <Card \r\n        v-for=\"box in similarBoxes\" \r\n        :key=\"box.id\"\r\n        :box=\"box\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted } from 'vue'\r\nimport { useRoute } from 'vue-router' // если используешь vue-router\r\nimport { boxes, calculateBoxPrice } from '@/data/boxes'\r\nimport {products} from '@/data/products'\r\nimport Card from \"@/components/Card.vue\"\r\nimport { cartUtils } from '@/utils/cartUtils'\r\nimport { favoritesUtils } from '@/utils/favoritesUtils'\r\n\r\n// Получить slug из роута (или пропсов)\r\nconst props = defineProps({\r\n  boxId: String, // если передаёшь напрямую\r\n  slug: String   // если используешь slug\r\n})\r\n\r\nconst route = useRoute() // раскомментируй если используешь vue-router\r\nconst slug = computed(() => props.slug || route.params.slug)\r\n\r\nconst currentImage = ref('')\r\nconst isFavorite = ref(false)\r\nconst isAddingToCart = ref(false)\r\n\r\n// Найти бокс по slug или id\r\nconst box = computed(() => {\r\n  return boxes.find(b => b.slug === slug.value || b.id === props.boxId)\r\n})\r\n\r\nconst similarBoxes = computed(() => {\r\n  if (!box.value) return []\r\n\r\n  // убираем текущий бокс\r\n  const others = boxes.filter(b => b.id !== box.value.id)\r\n\r\n  // ищем боксы с той же эмоцией или пересечением тегов\r\n  let similar = others.filter(b => {\r\n    const sameEmotion = b.emotion === box.value.emotion\r\n    const sameTag = b.tags.some(tag => box.value.tags.includes(tag))\r\n    return sameEmotion || sameTag\r\n  })\r\n\r\n  // если нашлось меньше 4 — добиваем случайными\r\n  if (similar.length < 4) {\r\n    const rest = others.filter(b => !similar.includes(b))\r\n    // перемешиваем\r\n    for (let i = rest.length - 1; i > 0; i--) {\r\n      const j = Math.floor(Math.random() * (i + 1))\r\n      ;[rest[i], rest[j]] = [rest[j], rest[i]]\r\n    }\r\n    similar = similar.concat(rest.slice(0, 4 - similar.length))\r\n  }\r\n\r\n  // если вообще нет похожих — просто 4 случайных\r\n  if (similar.length === 0) {\r\n    const shuffled = [...others].sort(() => 0.5 - Math.random())\r\n    return shuffled.slice(0, 4)\r\n  }\r\n\r\n  return similar.slice(0, 4)\r\n})\r\n// Состав бокса (редактируемый)\r\nconst boxItems = ref([])\r\n\r\n// Оригинальная цена (дефолтный состав)\r\nconst originalPrice = computed(() => {\r\n  if (!box.value) return 0\r\n  return calculateBoxPrice(box.value.id)\r\n})\r\n\r\n// Текущая цена (с учётом изменений)\r\nconst totalPrice = computed(() => {\r\n  return boxItems.value.reduce((sum, item) => {\r\n    return sum + (item.price * item.quantity)\r\n  }, 0)\r\n})\r\n\r\n// Проверка, изменён ли состав\r\nconst isCompositionModified = computed(() => {\r\n  if (!box.value) return false\r\n  \r\n  const original = box.value.defaultComposition\r\n  if (original.length !== boxItems.value.length) return true\r\n  \r\n  return boxItems.value.some(item => {\r\n    const originalItem = original.find(o => o.productId === item.productId)\r\n    return !originalItem || originalItem.quantity !== item.quantity\r\n  })\r\n})\r\n\r\n// Увеличить количество\r\nfunction increaseQuantity(item) {\r\n  item.quantity++\r\n}\r\n\r\n// Уменьшить количество\r\nfunction decreaseQuantity(item) {\r\n  if (item.quantity > 1) {\r\n    item.quantity--\r\n  }\r\n}\r\n\r\n// Удалить товар\r\nfunction removeItem(productId) {\r\n  boxItems.value = boxItems.value.filter(item => item.productId !== productId)\r\n}\r\n\r\n// Сбросить к оригинальному составу\r\nfunction resetComposition() {\r\n  if (!box.value) return\r\n  loadBoxComposition()\r\n}\r\n\r\n// Загрузить состав бокса\r\nfunction loadBoxComposition() {\r\n  if (!box.value) return\r\n  \r\n  boxItems.value = box.value.defaultComposition.map(item => {\r\n    const product = products[item.productId]\r\n    return {\r\n      productId: item.productId,\r\n      name: product.name,\r\n      description: product.description,\r\n      price: product.price,\r\n      image: product.image,\r\n      quantity: item.quantity\r\n    }\r\n  })\r\n}\r\n\r\n// Добавить в корзину\r\nfunction addToCart() {\r\n  if (!box.value || boxItems.value.length === 0) return\r\n  \r\n  isAddingToCart.value = true\r\n  \r\n  // Создаём кастомный состав если он изменён\r\n  const customComposition = isCompositionModified.value\r\n    ? boxItems.value.map(item => ({\r\n        productId: item.productId,\r\n        quantity: item.quantity\r\n      }))\r\n    : null\r\n  \r\n  // Если состав не изменён, добавляем дефолтный бокс\r\n  if (!customComposition) {\r\n    cartUtils.addBox(box.value.id)\r\n  } else {\r\n    // Если изменён, добавляем с кастомным составом\r\n    const cartItem = cartUtils.addBox(box.value.id)\r\n    cartUtils.updateBoxComposition(cartItem.id, customComposition)\r\n  }\r\n  \r\n  console.log('Добавлено в корзину:', box.value.name, customComposition ? '(изменённый состав)' : '')\r\n  \r\n  setTimeout(() => {\r\n    isAddingToCart.value = false\r\n  }, 2000)\r\n}\r\n\r\n// Переключить избранное\r\nfunction toggleFavorite() {\r\n  if (!box.value) return\r\n  const added = favoritesUtils.toggle(box.value.id)\r\n  isFavorite.value = added\r\n}\r\n\r\n// Форматировать цену\r\nfunction formatPrice(price) {\r\n  return price.toLocaleString('ru-RU')\r\n}\r\n\r\n// Инициализация\r\nonMounted(() => {\r\n  if (box.value) {\r\n    currentImage.value = box.value.images[0]\r\n    isFavorite.value = favoritesUtils.isFavorite(box.value.id)\r\n    loadBoxComposition()\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.cards-wrapper{\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  gap: 25px;\r\n}\r\n\r\n.box-page {\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  padding: 40px 20px;\r\n}\r\n\r\n.loading {\r\n  text-align: center;\r\n  padding: 100px 20px;\r\n}\r\n\r\n/* Hero Section */\r\n.hero-section {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 50px;\r\n  margin-bottom: 60px;\r\n}\r\n\r\n/* Gallery */\r\n.gallery {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 15px;\r\n}\r\n\r\n.main-image {\r\n  width: 100%;\r\n  aspect-ratio: 1;\r\n  border-radius: 20px;\r\n  overflow: hidden;\r\n  background: rgba(255, 255, 255, 0.03);\r\n}\r\n\r\n.main-image img {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n}\r\n\r\n.thumbnails {\r\n  display: flex;\r\n  gap: 10px;\r\n}\r\n\r\n.thumbnail {\r\n  width: 80px;\r\n  height: 80px;\r\n  border-radius: 12px;\r\n  overflow: hidden;\r\n  cursor: pointer;\r\n  border: 2px solid transparent;\r\n  transition: all 0.3s ease;\r\n  background: rgba(255, 255, 255, 0.03);\r\n}\r\n\r\n.thumbnail:hover {\r\n  border-color: rgba(53, 198, 107, 0.5);\r\n}\r\n\r\n.thumbnail.active {\r\n  border-color: #35C66B;\r\n}\r\n\r\n.thumbnail img {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n}\r\n\r\n/* Box Info */\r\n.box-info {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px;\r\n}\r\n\r\n.gradient-second-text {\r\n  background: linear-gradient(135deg, #35C66B, #2A9D56);\r\n  -webkit-background-clip: text;\r\n  -webkit-text-fill-color: transparent;\r\n  background-clip: text;\r\n}\r\n\r\n.gray-text {\r\n  color: #999;\r\n}\r\n\r\n.white-text {\r\n  color: #fff;\r\n}\r\n\r\n.second-text {\r\n  color: #35C66B;\r\n}\r\n\r\n/* Price Block */\r\n.price-block {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 15px;\r\n}\r\n\r\n.original-price {\r\n  font-size: 18px;\r\n}\r\n\r\n.current-price {\r\n  font-size: 36px;\r\n}\r\n\r\n\r\n/* Emotions */\r\n.emotions-block {\r\n  padding: 15px 20px;\r\n  background: rgba(53, 198, 107, 0.1);\r\n  border: 1px solid rgba(53, 198, 107, 0.2);\r\n  border-radius: 12px;\r\n}\r\n\r\n/* Action Buttons */\r\n.action-buttons {\r\n  display: flex;\r\n  gap: 15px;\r\n}\r\n\r\n.button-second {\r\n  flex: 1;\r\n  padding: 16px 32px;\r\n  background: linear-gradient(135deg, #35C66B, #2A9D56);\r\n  border: none;\r\n  border-radius: 12px;\r\n  color: #fff;\r\n  font-size: 16px;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.button-second:hover:not(:disabled) {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 8px 24px rgba(53, 198, 107, 0.4);\r\n}\r\n\r\n.button-second:disabled {\r\n  opacity: 0.5;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.button-gray {\r\n  width: 56px;\r\n  height: 56px;\r\n  padding: 0;\r\n  background: rgba(255, 255, 255, 0.05);\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  border-radius: 12px;\r\n  color: #fff;\r\n  font-size: 24px;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.button-gray:hover {\r\n  background: rgba(255, 255, 255, 0.1);\r\n  color: #35C66B;\r\n}\r\n\r\n/* Tags */\r\n.tags-block {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 10px;\r\n}\r\n\r\n.tag {\r\n  padding: 8px 16px;\r\n  background: rgba(255, 255, 255, 0.05);\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  border-radius: 20px;\r\n  color: #aaa;\r\n  font-size: 14px;\r\n}\r\n\r\n/* Items Section */\r\n.items-section {\r\n  margin-bottom: 60px;\r\n}\r\n\r\n.items-section > h2 {\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.items-section > p {\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.items-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px;\r\n}\r\n\r\n.box-item {\r\n  display: flex;\r\n  gap: 20px;\r\n  padding: 20px;\r\n  background: rgba(255, 255, 255, 0.03);\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  border-radius: 16px;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.box-item:hover {\r\n  background: rgba(255, 255, 255, 0.05);\r\n  border-color: rgba(53, 198, 107, 0.2);\r\n}\r\n\r\n.item-image {\r\n  width: 100px;\r\n  height: 100px;\r\n  border-radius: 12px;\r\n  overflow: hidden;\r\n  flex-shrink: 0;\r\n  background: rgba(255, 255, 255, 0.05);\r\n}\r\n\r\n.item-image img {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n}\r\n\r\n.item-details {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n}\r\n\r\n.item-unit-price {\r\n  margin-top: auto;\r\n}\r\n\r\n.item-controls {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 20px;\r\n}\r\n\r\n.quantity-control {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  padding: 8px 12px;\r\n  background: rgba(255, 255, 255, 0.05);\r\n  border-radius: 12px;\r\n}\r\n\r\n.qty-btn {\r\n  width: 32px;\r\n  height: 32px;\r\n  border: none;\r\n  background: rgba(255, 255, 255, 0.1);\r\n  border-radius: 8px;\r\n  color: #fff;\r\n  font-size: 18px;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.qty-btn:hover:not(:disabled) {\r\n  background: rgba(53, 198, 107, 0.3);\r\n}\r\n\r\n.qty-btn:disabled {\r\n  opacity: 0.3;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.item-price {\r\n  min-width: 120px;\r\n  text-align: right;\r\n}\r\n\r\n.delete-btn {\r\n  width: 36px;\r\n  height: 36px;\r\n  border: none;\r\n  background: rgba(255, 107, 107, 0.1);\r\n  border-radius: 8px;\r\n  color: #ff6b6b;\r\n  font-size: 20px;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.delete-btn:hover {\r\n  background: rgba(255, 107, 107, 0.2);\r\n  transform: rotate(90deg);\r\n}\r\n\r\n/* Empty State */\r\n.empty-state {\r\n  text-align: center;\r\n  padding: 60px 20px;\r\n}\r\n\r\n.empty-state p {\r\n  margin-bottom: 20px;\r\n  font-size: 16px;\r\n}\r\n\r\n/* Reset Composition */\r\n.reset-composition {\r\n  margin-top: 20px;\r\n  text-align: center;\r\n}\r\n\r\n.reset-btn {\r\n  padding: 12px 24px;\r\n  background: rgba(255, 255, 255, 0.05);\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  border-radius: 10px;\r\n  color: #35C66B;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.reset-btn:hover {\r\n  background: rgba(53, 198, 107, 0.1);\r\n  border-color: rgba(53, 198, 107, 0.3);\r\n}\r\n\r\n/* Features */\r\n.description-section {\r\n  margin-bottom: 60px;\r\n}\r\n\r\n.description-section > h2 {\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.features {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));\r\n  gap: 25px;\r\n}\r\n\r\n.feature-item {\r\n  display: flex;\r\n  gap: 20px;\r\n  padding: 25px;\r\n  background: rgba(255, 255, 255, 0.03);\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  border-radius: 16px;\r\n}\r\n\r\n.feature-icon {\r\n  font-size: 36px;\r\n  width: 60px;\r\n  height: 60px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: rgba(53, 198, 107, 0.1);\r\n  border-radius: 12px;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.feature-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n}\r\n\r\n/* Responsive */\r\n@media (max-width: 968px) {\r\n  .hero-section {\r\n    grid-template-columns: 1fr;\r\n  }\r\n  \r\n  .box-item {\r\n    flex-direction: column;\r\n  }\r\n  \r\n  .item-controls {\r\n    justify-content: space-between;\r\n  }\r\n}\r\n</style>","import script from \"./BoxPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./BoxPage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./BoxPage.vue?vue&type=style&index=0&id=30e09a95&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-30e09a95\"]])\n\nexport default __exports__"],"names":["props","__props","route","useRoute","slug","computed","params","currentImage","ref","isFavorite","isAddingToCart","box","boxes","find","b","value","id","boxId","similarBoxes","others","filter","similar","sameEmotion","emotion","sameTag","tags","some","tag","includes","length","rest","i","j","Math","floor","random","concat","slice","shuffled","sort","boxItems","originalPrice","calculateBoxPrice","totalPrice","reduce","sum","item","price","quantity","isCompositionModified","original","defaultComposition","originalItem","o","productId","increaseQuantity","decreaseQuantity","removeItem","resetComposition","loadBoxComposition","map","product","products","name","description","image","addToCart","customComposition","cartItem","cartUtils","addBox","updateBoxComposition","console","log","setTimeout","toggleFavorite","added","favoritesUtils","toggle","formatPrice","toLocaleString","onMounted","images","_createElementBlock","_hoisted_1","_Fragment","key","_createElementVNode","_hoisted_3","_hoisted_4","_hoisted_5","src","alt","_hoisted_7","_renderList","img","index","class","_normalizeClass","active","onClick","$event","_hoisted_10","_hoisted_11","_toDisplayString","_hoisted_12","tagline","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","disabled","_hoisted_20","title","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","features","feature","_hoisted_42","icon","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_2","_cache","_hoisted_46","_createBlock","Card","__exports__"],"sourceRoot":""}